var SolarCalc=function(){function e(a){return Math.PI*a/180}function l(a){var b=23+(26+(21.448-a*(46.815+a*(5.9E-4-.001813*a)))/60)/60+.00256*Math.cos(e(125.04-1934.136*a));var c=280.46646+a*(36000.76983+3.032E-4*a);var f=360<c||0>c?c-360*Math.floor(c/360):c;c=.016708634-a*(4.2037E-5+1.267E-7*a);a=357.52911+a*(35999.05029-1.537E-4*a);b=Math.tan(e(b)/2);b*=b;var d=Math.sin(2*e(f)),g=Math.sin(e(a)),h=Math.cos(2*e(f));f=Math.sin(4*e(f));a=Math.sin(2*e(a));return 180*(b*d-2*c*g+4*c*b*g*h-.5*b*b*f-1.25*
c*c*a)/Math.PI*4}function k(a){var b=a.getUTCMonth()+1,c=a.getUTCDate(),f=a.getUTCFullYear(),d=a.getUTCHours(),e=a.getUTCMinutes();a=a.getUTCSeconds();2>=b&&(--f,b+=12);var h=Math.floor(f/100),b=Math.floor(365.25*(f+4716))+Math.floor(30.6001*(b+1))+c+(2-h+Math.floor(h/4))-1524.5;return b=b+d/24+e/1440+a/86400}this.getSolarDeclination=function(a){var b=new Date(a);b.setUTCMonth(0);b.setUTCDate(1);b.setUTCHours(0);b.setUTCMinutes(0);b.setUTCSeconds(0);b.setUTCMilliseconds(0);a=(a.getTime()-b.getTime())/
864E5;2===a&&(a+=1E-6);return Math.asin(Math.sin(e(-23.44))*Math.cos(e(360)/365.24*(a+10)+e(360)/Math.PI*.0167*Math.sin(e(360)/365.24*(a-2))))};this.getSolarElevation=function(a,b,c){a=e(a);var f=k(c),d=b/15,d=0>d?Math.ceil(d):Math.floor(d),d=c.getUTCHours()+d;0>d&&(d+=24);24<d&&(d-=24);d=60*d+c.getUTCMinutes();f=l((f-2451545)/36525);b=d+(f+b%15*4);1440<b&&(b-=1440);-1440>b&&(b+=1440);b=b/4-180;-180>b&&(b+=360);180<b&&(b-=360);b=e(b);c=this.getSolarDeclination(c);c=Math.asin(Math.cos(b)*Math.cos(c)*
Math.cos(a)+Math.sin(c)*Math.sin(a));return c=180*c/Math.PI};this.getJulianDay=function(a){return k(a)};this.calcSunriseSetUTC=function(a,b,c,f){var d=new Date(b);d.setUTCHours(0);d.setUTCMinutes(0);d.setUTCSeconds(0);d.setUTCMilliseconds(0);d.setUTCDate(d.getUTCDate()-1);var g=(k(d)-2451545)/36525,g=l(g);b=this.getSolarDeclination(b);c=e(c);c=Math.cos(e(90.833))/(Math.cos(c)*Math.cos(b))-Math.tan(c)*Math.tan(b);c=Math.acos(c);return isNaN(c)?null:(a||(c=-c),a=720-4*(f+180*c/Math.PI)-g,f=Math.round(60*
(a-Math.floor(a))),a=Math.floor(a),d.setUTCMinutes(d.getUTCMinutes()+a),d.setUTCSeconds(d.getUTCSeconds()+f),d)}};