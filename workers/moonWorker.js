"use strict";class MoonWorker{constructor(){function e(e){s=new EclipseData(JSON.parse(e)),a=Math.round(s.getMaxEclipseDateJD())}function t(e){i=JSON.parse(e)}function o(e,t){var o=0,s=new Date(parseFloat(e)),r=0;t&&(r=parseFloat(t)),n.setDate(s,a,r),i.altitude&&(o=i.altitude);var l=n.getMoonPosition(i.latitude,i.longitude,o),c=n.getSunPosition(i.latitude,i.longitude,o);postMessage({cmd:"moon_position",moon_pos:JSON.stringify(l),sun_pos:JSON.stringify(c),date:s.getTime().toString()})}importScripts("EclipseCalc.js"),importScripts("planetpositions.js"),importScripts("earth_vsop_d.js");var s=null,i=null,a=0,n=new PlanetPositionsAC;self.addEventListener("message",s=>{var i=s.data;switch(i.cmd){case"eclipse":e(i.eclipse);break;case"location":t(i.coords);break;case"real":o(i.time,i.jd);break;default:console.log("MOON WORKER: Unkown command sent to worker.")}},!1)}}(()=>{console.log("MOON WORKER: Initialized.");new MoonWorker})();