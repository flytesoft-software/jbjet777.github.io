"use strict";function PlanetPositionsAC(){function n(n){return isNaN(n)?(console.log("RAD NAN"),0):180*n/Math.PI}function t(n){return isNaN(n)?(console.log("DEG NAN"),0):Math.PI*n/180}function e(n){var e=Math.sin(t(n));return isNaN(e)?(console.log("SIN NAN"),0):e}function r(n){var e=Math.cos(t(n));return isNaN(e)?(console.log("COS NAN"),0):e}function o(n){var e=Math.tan(t(n));return isNaN(e)?(console.log("TAN NAN"),0):e}function u(t){return n(Math.atan(t))}function a(t){var e=Math.acos(t);return isNaN(e)?(console.log("ACOS NAN"),0):n(e)}function i(t){var e=Math.asin(t);return isNaN(e)?(console.log("ASIN NAN"),0):n(e)}function c(t,e){return n(Math.atan2(t,e))}function f(n){return Math.sqrt(Math.abs(n))}function l(n){return i(e(8.79415/3600)/s(n))}function s(n){return n/vn}function N(n){var t=n.getTime()/864e5-10956;return dn=v(n),dn/=86400,t+=1*dn}function v(n){var t=0,e=0,r=0,o=0,u=0,a=n.getUTCFullYear(),i=new Date(Date.UTC(a,0,0,0,0,0)),c=n.getTime()-i.getTime(),f=new Date(i);return f.setUTCFullYear(f.getUTCFullYear()+1),c/=f.getTime()-i.getTime(),(a+=c)<1900?u=7.62+.5737*(t=a-1860)-.251754*(e=t*t)+.01680668*(r=e*t)-.0004473624*(o=r*t)+o*t/233174:a>=1900&&a<1920?u=1.494119*(t=a-1900)-2.79-.0598939*(e=t*t)+.0061966*(r=e*t)-197e-6*(o=r*t):a>=1920&&a<1941?u=21.2+.84493*(t=a-1920)-.0761*(e=t*t)+.0020936*(r=e*t):a>=1941&&a<1961?u=29.07+.407*(t=a-1950)-(e=t*t)/233+(r=e*t)/2547:a>=1961&&a<1986?u=45.45+1.067*(t=a-1975)-(e=t*t)/260-(r=e*t)/718:a>=1986&&a<2005?u=63.86+.3345*(t=a-2e3)-.060374*(e=t*t)+.0017275*(r=e*t)+651814e-9*(o=r*t)+2373599e-11*(o*t):a>=2005&&a<2050?u=62.92+.32217*(t=a-2e3)+.005589*(e=t*t):a>=2050&&a<2150?u=(a-1820)/100*32*((a-1820)/100)-20-.5628*(2150-a):a>=2150&&(u=32*(t=(a-1820)/100)*t-20),(a<1955||a>2005)&&(u-=12932e-9*(a-1955)*(a-1955)),u}function h(n){return n>360||n<0?n-360*Math.floor(n/360):n}function d(n,t,e){var r=90-a(e/f(n*n+t*t+e*e));return isNaN(r)&&(r=0),r}function g(n,t){var e=c(t,n);return isNaN(e)&&(e=0),h(e)}function A(n,t,a,c,s,N){var v=t,d=0,g=0,A=c,m=0,M=0,p=0,y=0,x=0,T=0,w=0,_=0,z=0,C=0,F=(e(2*s),r(2*s),0);for(C=D(n,v);z<7;)m=l(A),p=.99664719*e(M=u(.99664719*o(s)))+N/6378149*e(s),g=-m*(y=r(M)+N/6378149*r(s))*e(C)/r(a),F=-m*(p*r(a)-y*r(C)*e(a)),isNaN(g)&&(g=0),v=h(t+g),d=a+F,x=i(6378.149/c),A=c*f((T=r(d)*e(C))*T+(w=r(d)*r(C)-y*e(x))*w+(_=e(d)-p*e(x))*_),isNaN(d)&&(d=a),z++;return{top_ra:v,top_decl:d,top_dist:A}}function m(){var n=(450160.398036-6962890.5431*B+7.4722*J+.007702*K-5939e-8*Q)/3600;return n=h(n)}function M(){var n=(335779.526232+1739527262.8478*B-12.7512*J-.001037*K+417e-8*Q)/3600;return n=h(n)}function p(){var n=(1072260.70369+1602961601.209*B-6.3706*J+.006593*K-3169e-8*Q)/3600;return n=h(n)}function y(){return h(218.3164477+481267.88123421*B-.0015786*J+K/538841-Q/65194e3)}function x(){var n=(485868.249036+1717915923.2178*B+31.8792*J+.051635*K-2447e-7*Q)/3600;return n=h(n)}function T(){return 1-.002516*B-74e-7*J}function w(){var n=1287104.79305+129596581.0481*B-.5532*J+136e-6*K-1149e-8*Q;return n/=3600,h(n)}function _(n){var t=(n+hn)/3652500,e=84381.448,r=t;return e-=4680.93*r,r*=t,e-=1.55*r,r*=t,e+=1999.25*r,r*=t,e-=51.38*r,r*=t,e-=249.67*r,r*=t,e-=39.05*r,r*=t,e+=7.12*r,r*=t,e+=27.87*r,r*=t,e+=5.79*r,r*=t,e+=2.45*r,e/=3600,h(e)}function z(n){var t=R.getUTCHours()+R.getUTCMinutes()/60+R.getUTCSeconds()/3600;return h(h(100.46061837+36000.770053608*B+387933e-9*J-K/3871e4)+n+15*t)}function D(n,t){return h(n-t)}function C(n,t){return 2*c(n,2*t)}function F(n,t,u){return{azimuth:h(c(e(n),r(n)*e(u)-o(t)*r(u))+180),elevation:i(e(u)*e(t)+r(u)*r(t)*r(n))}}function P(n,t,o){return{x:o*r(t)*r(n),y:o*e(t)*r(n),z:o*e(n)}}function U(n,t){return{x:t.x,y:t.y*r(n)-t.z*e(n),z:t.y*e(n)+t.z*r(n)}}function I(n,t,o,u,a){var i=B,c=0;return c+=(-172064161-174666*i)*e(a)+33386*r(a),c+=(-13170906-1675*i)*e(2*(o-u+a))-13696*r(2*(o-u+a)),c+=(-2276413-234*i)*e(2*(o+a))+2796*r(2*(o+a)),c+=(2074554+207*i)*e(2*a)-698*r(2*a),c+=(1475877-3633*i)*e(t)+11817*r(t),c+=(1226*i-516821)*e(t+2*(o-u+a))-524*r(t+2*(o-u+a)),c+=(711159+73*i)*e(n)-872*r(n),c+=(-387298-367*i)*e(2*o+a)+380*r(2*o+a),c+=(-301461-36*i)*e(n+2*(o+a))+816*r(n+2*(o+a)),c+=(215829-494*i)*e(2*(o-u+a)-t)+111*r(2*(o-u+a)-t),c+=(128227+137*i)*e(2*(o-u)+a)+181*r(2*(o-u)+a),c+=(123457+11*i)*e(2*(o+a)-n)+19*r(2*(o+a)-n),c+=(156994+10*i)*e(2*u-n)-168*r(2*u-n),c+=(63110+63*i)*e(n+a)+27*r(n+a),c+=(-57976-63*i)*e(a-n)-189*r(a-n),c+=(-59641-11*i)*e(2*(o+u+a)-n)+149*r(2*(o+u+a)-n),c+=(-51613-42*i)*e(n+2*o+a)+129*r(n+2*o+a),c+=(45893+50*i)*e(2*(o-n)+a)+31*r(2*(o-n)+a),c+=(63384+11*i)*e(2*u)-150*r(2*u),c+=(-38571-i)*e(2*(o+u+a))+158*r(2*(o+u+a)),c+=32481*e(2*(o-t-u+a)),c-=47722*e(2*(u-n))+18*r(2*(u-n)),c+=(-31046-i)*e(2*(n+o+a))+131*r(2*(n+o+a)),c+=28593*e(n+2*(o-u+a))-r(n+2*(o-u+a)),c+=(20441+21*i)*e(2*o+a-n)+10*r(2*o+a-n),c+=29243*e(2*n)-74*r(2*n),c+=25887*e(2*o)-66*r(2*o),c+=(-14053-25*i)*e(t+a)+79*r(t+a),c+=(15164+10*i)*e(2*u-n+a)+11*r(2*u-n+a),c+=(72*i-15794)*e(2*(t+o-u+a))-16*r(2*(t+o-u+a)),c+=21783*e(2*(u-o))+13*r(2*(u-o)),c+=(-12873-10*i)*e(n-2*u+a)-37*r(n-2*u+a),c+=(11*i-12654)*e(a-t)+63*r(a-t),c-=10204*e(2*(o+u)+a-n)-25*r(2*(o+u)+a-n),c+=(16707-85*i)*e(2*t)-10*r(2*t),c-=7691*e(n+2*(o+u+a))-44*r(n+2*(o+u+a)),c-=11024*e(2*(o-n))+14*r(2*(o-n)),c+=(7566-21*i)*e(t+2*(o+a))-11*r(t+2*(o+a)),c+=(-6637-11*i)*e(2*(o+u)+a)+25*r(2*(o+u)+a),c+=(21*i-7141)*e(2*(o+a)-t)+8*r(2*(o+a)-t),c+=(-6302-11*i)*e(2*u+a)+2*r(2*u+a),c+=(5800+10*i)*e(n+2*(o-u)+a)+2*r(n+2*(o-u)+a),c+=6443*e(2*(n+o-u+a))-7*r(2*(n+o-u+a)),c+=(-5774-11*i)*e(2*(u-n)+a)-15*r(2*(u-n)+a),c-=5350*e(2*(n+o)+a)-21*r(2*(n+o)+a),c+=(-4752-11*i)*e(2*(o-u)+a-t)-3*r(2*(o-u)+a-t),c+=(-4940-11*i)*e(a-2*u)-21*r(a-2*u),c+=7350*e(2*u-n-t)-8*r(2*u-n-t),c+=4065*e(2*(n-u)+a)+6*r(2*(n-u)+a),c+=6579*e(n+2*u)-24*r(n+2*u),c+=3579*e(t+2*(o-u)+a)+5*r(t+2*(o-u)+a),c+=4725*e(n-t)-6*r(n-t),c-=3075*e(2*(o+a-n))+2*r(2*(o+a-n)),c-=2904*e(3*n+2*(o+a))-15*r(3*n+2*(o+a)),c+=4348*e(2*u-t)-10*r(2*u-t),c-=2878*e(n-t+2*(o+a))-8*r(n-t+2*(o+a)),c-=4230*e(u)-5*r(u),c-=2819*e(2*(o+u+a)-n-t)-7*r(2*(o+u+a)-n-t),c-=4056*e(2*o-n)-5*r(2*o-n),c-=2647*e(2*(o+u+a)-t)-11*r(2*(o+u+a)-t),c-=2294*e(a-2*n)+10*r(a-2*n),c+=2481*e(n+t+2*(o+a))-7*r(n+t+2*(o+a)),c+=2179*e(2*n+a)-2*r(2*n+a),c+=3276*e(t+u-n)+r(t+u-n),c-=3389*e(n+t)-5*r(n+t),c+=3339*e(n+2*o)-13*r(n+2*o),c-=1987*e(2*(o-u)+a-n)+6*r(2*(o-u)+a-n),c-=1981*e(n+2*a),c+=4026*e(u-n)-353*r(u-n),c+=1660*e(2*o+u+2*a)-5*r(u+2*(o+a)),c-=1521*e(2*(o+2*u+a)-n)-9*r(2*(o+2*u+a)-n),c+=1314*e(t+u+a-n),c-=1283*e(2*(o-u-t)+a),c-=1331*e(n+2*o+2*u+a)-8*r(n+2*(o+u)+a),c+=1383*e(2*(o-n+u+a))-2*r(2*(o-n+u+a)),c+=1405*e(2*a-n)+4*r(2*a-n),(c+=1290*e(n+t+2*(o-u+a)))/36e9}function S(n,t,o,u,a){var i=B,c=0;return c+=(92052331+9086*i)*r(a)+15377*e(a),c+=(5730336-3015*i)*r(2*(o-u+a))-4587*e(2*(o-u+a)),c+=(978459-485*i)*r(2*(o+a))+1374*e(2*(o+a)),c+=(470*i-897492)*r(2*a)-291*e(2*a),c+=(73871-184*i)*r(t)-1924*e(t),c+=(224386-677*i)*r(t+2*(o-u+a))-174*e(t+2*(o-u+a)),c-=6750*r(n)-358*e(n),c+=(200728+18*i)*r(2*o+a)+318*e(2*o+a),c+=(129025-63*i)*r(n+2*(o+a))+367*e(n+2*(o+a)),c+=(299*i-95929)*r(2*(o-u+a)-t)+132*e(2*(o-u+a)-t),c+=(-68982-9*i)*r(2*(o-u)+a)+39*e(2*(o-u)+a),c+=(32*i-53311)*r(2*(o+a)-n)-4*e(2*(o+a)-n),c-=1235*r(2*u-n)-82*e(2*u-n),c-=33228*r(n+a)+9*e(n+a),c+=31429*r(a-n)-75*e(a-n),c+=(25543-11*i)*r(2*(o+u+a)-n)+66*e(2*(o+u+a)-n),c+=26366*r(n+2*o+a)+78*e(n+2*o+a),c+=(-24236-10*i)*r(2*(o-n)+a)+20*e(2*(o-n)+a),c-=1220*r(2*u)-29*e(2*u),c+=(16452-11*i)*r(2*(o+u+a))+68*e(2*(o+u+a)),c-=13870*r(2*(o-t-u+a)),c+=477*r(2*(u-n))-25*e(2*(u-n)),c+=(13238-11*i)*r(2*(n+o+a))+59*e(2*(n+o+a)),c+=(10*i-12338)*r(n+2*(o-u+a))-3*e(n+2*(o-u+a)),c-=10758*r(2*o+a-n)+3*e(2*o+a-n),c-=609*r(2*n)-13*e(2*n),c-=550*r(2*o)-11*e(2*o),c+=(8551-2*i)*r(t+a)-45*e(t+a),c-=8001*r(2*u+a-n)+e(2*u+a-n),c+=(6850-42*i)*r(2*(t+o-u+a))-5*e(2*(t+o-u+a)),c-=167*r(2*(u-o))-13*e(2*(u-o)),c+=6953*r(n-2*u+a)-14*e(n-2*u+a),c+=6415*r(a-t)+26*e(a-t),c+=5222*r(2*(o+u)+a-n)+15*e(2*(o+u)+a-n),c+=(168-i)*r(2*t)+10*e(2*t),c+=3268*r(n+2*(o+u+a))+19*e(n+2*(o+u+a)),c+=104*r(2*(o-n))+2*e(2*(o-n)),c-=3250*r(t+2*(o+a))+5*e(t+2*(o+a)),c+=3353*r(2*(o+u)+a)+14*e(2*(o+u)+a),c+=3070*r(2*(o+a)-t)+4*e(2*(o+a)-t),c+=3272*r(2*u+a)+4*e(2*u+a),c-=3045*r(n+2*(o-u)+a)+e(n+2*(o-u)+a),c-=2768*r(2*(n+o-u+a))+4*e(2*(n+o-u+a)),c+=3041*r(2*(u-n)+a)-5*e(2*(u-n)+a),c+=2695*r(2*(n+o)+a)+12*e(2*(n+o)+a),c+=2719*r(2*(o-u)+a-t)-3*e(2*(o-u)+a-t),c+=2720*r(a-2*u)-9*e(a-2*u),c-=51*r(2*u-n-t)-4*e(2*u-n-t),c-=2206*r(2*(n-u)+a)-e(2*(n-u)+a),c-=199*r(n+2*u)-2*e(n+2*u),c-=1900*r(t+2*(o-u)+a)-e(t+2*(o-u)+a),c-=41*r(n-t)-3*e(n-t),c+=1313*r(2*(o-n+a))-e(2*(o-n+a)),c+=1233*r(3*n+2*(o+a))+7*e(3*n+2*(o+a)),c-=81*r(2*u-t)-2*e(2*u-t),c+=1232*r(n-t+2*(o+a))+4*e(n-t+2*(o+a)),c-=20*r(u)+2*e(u),c+=1207*r(2*(o+u+a)-n-t)+3*e(2*(o+u+a)-n-t),c+=40*r(2*o-n)-2*e(2*o-n),c+=1129*r(2*(o+u+a)-t)+5*e(2*(o+u+a)-t),c+=1266*r(a-2*n)-4*e(a-2*n),c-=1062*r(n+t+2*(o+a))+3*e(n+t+2*(o+a)),c-=1129*r(2*n+a)+2*e(2*n+a),c-=9*r(t+u-n),c+=35*r(n+t)-2*e(n+t),c-=107*r(n+2*o)-e(n+2*o),c+=1073*r(2*(o-u)+a-n)-2*e(2*(o-u)+a-n),c+=854*r(n+2*a),c-=553*r(u-n)+139*e(u-n),c-=710*r(2*(o+a)+u)+2*e(2*(o+a)+u),c+=647*r(2*(o+2*u+a)-n)+4*e(2*(o+2*u+a)-n),c-=700*r(t+u+a-n),c+=672*r(2*(o-t-u)+a),c+=663*r(n+2*(o+u)+a)+4*e(n+2*(o+u)+a),c-=594*r(2*(o-n+u+a))+2*e(2*(o-n+u+a)),c-=610*r(2*a-n)-2*e(2*a-n),(c-=556*r(n+t+2*(o-u+a)))/36e9}function Y(){return[[0,0,1,0],[2,0,-1,0],[2,0,0,0],[0,0,2,0],[0,1,0,0],[0,0,0,2],[2,0,-2,0],[2,-1,-1,0],[2,0,1,0],[2,-1,0,0],[0,1,-1,0],[1,0,0,0],[0,1,1,0],[2,0,0,-2],[0,0,1,2],[0,0,1,-2],[4,0,-1,0],[0,0,3,0],[4,0,-2,0],[2,1,-1,0],[2,1,0,0],[1,0,-1,0],[1,1,0,0],[2,-1,1,0],[2,0,2,0],[4,0,0,0],[2,0,-3,0],[0,1,-2,0],[2,0,-1,2],[2,-1,-2,0],[1,0,1,0],[2,-2,0,0],[0,1,2,0],[0,2,0,0],[2,-2,-1,0],[2,0,1,-2],[2,0,0,2],[4,-1,-1,0],[0,0,2,2],[3,0,-1,0],[2,1,1,0],[4,-1,-2,0],[0,2,-1,0],[2,2,-1,0],[2,1,-2,0],[2,-1,0,-2],[4,0,1,0],[0,0,4,0],[4,-1,0,0],[1,0,-2,0],[2,1,0,-2],[0,0,2,-2],[1,1,1,0],[3,0,-2,0],[4,0,-3,0],[2,-1,2,0],[0,2,1,0],[1,1,-1,0],[2,0,3,0],[2,0,-1,-2]]}function b(){return[[6288774,-20905355],[1274027,-3699111],[658314,-2955968],[213618,-569925],[-185116,48888],[-114332,-3149],[58793,246158],[57066,-152138],[53322,-170733],[45758,-204586],[-40923,-129620],[-34720,108743],[-30383,104755],[15327,10321],[-12528,0],[10980,79661],[10675,-34782],[10034,-23210],[8548,-21636],[-7888,24208],[-6766,30824],[-5163,-8379],[4987,-16675],[4036,-12831],[3994,-10445],[3861,-11650],[3665,14403],[-2689,-7003],[-2602,0],[2390,10056],[-2348,6322],[2236,-9884],[-2120,5751],[-2069,0],[2048,-4950],[-1773,4130],[-1595,0],[1215,-3958],[-1110,0],[-892,3258],[-810,2616],[759,-1897],[-713,-2117],[-700,2354],[691,0],[596,0],[549,-1423],[537,-1117],[520,-1571],[-487,-1739],[-399,0],[-381,-4421],[351,0],[-340,0],[330,0],[327,0],[-323,1165],[299,0],[294,0],[0,8752]]}function j(){return[[0,0,0,1],[0,0,1,1],[0,0,1,-1],[2,0,0,-1],[2,0,-1,1],[2,0,-1,-1],[2,0,0,1],[0,0,2,1],[2,0,1,-1],[0,0,2,-1],[2,-1,0,-1],[2,0,-2,-1],[2,0,1,1],[2,1,0,-1],[2,-1,-1,1],[2,-1,0,1],[2,-1,-1,-1],[0,1,-1,-1],[4,0,-1,-1],[0,1,0,1],[0,0,0,3],[0,1,-1,1],[1,0,0,1],[0,1,1,1],[0,1,1,-1],[0,1,0,-1],[1,0,0,-1],[0,0,3,1],[4,0,0,-1],[4,0,-1,1],[0,0,1,-3],[4,0,-2,1],[2,0,0,-3],[2,0,2,-1],[2,-1,1,-1],[2,0,-2,1],[0,0,3,-1],[2,0,2,1],[2,0,-3,-1],[2,1,-1,1],[2,1,0,1],[4,0,0,1],[2,-1,1,1],[2,-2,0,-1],[0,0,1,3],[2,1,1,-1],[1,1,0,-1],[1,1,0,1],[0,1,-2,-1],[2,1,-1,-1],[1,0,1,1],[2,-1,-2,-1],[0,1,2,1],[4,0,-2,-1],[4,-1,-1,-1],[1,0,1,-1],[4,0,1,-1],[1,0,-1,-1],[4,-1,0,-1],[2,-2,0,1]]}function E(){return[5128122,280602,277693,173237,55413,46271,32573,17198,9266,8822,8216,4324,4200,-3359,2463,2211,2065,-1870,1828,-1794,-1749,-1565,-1491,-1475,-1410,-1344,-1335,1107,1021,833,777,671,607,596,491,-451,439,422,421,-366,-351,331,315,302,-283,-229,223,223,-220,-220,-185,181,-177,176,166,-164,132,-119,115,107]}function L(){for(var n=j(),t=E(),r=n.length,o=0,u=0,a=0;a<r;a++)u=t[a]*e(h(n[a][0]*rn+n[a][1]*un+n[a][2]*$+n[a][3]*en)),1===n[a][1]||-1===n[a][1]?u*=nn:2!==n[a][1]&&-2!==n[a][1]||(u*=tn),o+=u;return o-=2235*e(on),o+=382*e(fn),o+=175*e(h(an-en)),o+=175*e(h(an+en)),o+=127*e(h(on-$)),o-=115*e(h(on+$)),o/=1e6}function O(){for(var n=0,t=0,r=Y(),o=b(),u=r.length,a=0;a<u;a++)t=o[a][0]*e(h(r[a][0]*rn+r[a][1]*un+r[a][2]*$+r[a][3]*en)),1===r[a][1]||-1===r[a][1]?t*=nn:2!==r[a][1]&&-2!==r[a][1]||(t*=tn),n+=t;return n+=3958*e(an),n+=1962*e(h(on-en)),n+=318*e(cn),h(on+n/1e6+ln)}function X(){for(var n=0,t=0,e=Y(),o=b(),u=e.length,a=0;a<u;a++)t=o[a][1]*r(h(e[a][0]*rn+e[a][1]*un+e[a][2]*$+e[a][3]*en)),1===e[a][1]||-1===e[a][1]?t*=nn:2!==e[a][1]&&-2!==e[a][1]||(t*=tn),n+=t;return 385000.56+n/1e3}function Z(){return h(53.09+479264.29*B)}function q(){return h(119.75+131.849*B)}function G(){return h(313.45+481266.484*B)}function H(n){return An.find(n=>Math.abs(n.jdIndex-Nn)<=1)}var R=null,k=0,B=0,J=0,K=0,Q=0,V=0,W=0,$=0,nn=0,tn=0,en=0,rn=0,on=0,un=0,an=0,cn=0,fn=0,ln=0,sn=0,Nn=0,vn=149597871,hn=-1.5,dn=0,gn=null,An=[{jdIndex:2457987,moonX:new Float64Array([0x41bfca6623ff78,5290.876340618884,-9189.489244770575,.0024924126589560233]),moonY:new Float64Array([-0x282e9538067cd4,-3233.4052430461234,5616.109217784905,-.0015232311075495902]),moonZ:new Float64Array([-162387097319673.28,-46.25147358968696,80.62973631698192,-2186830191413755e-20]),sunX:new Float64Array([0x84f7e4dfacc8e0,10699.540576661608,-18583.943823988215,.005040350909218588]),sunY:new Float64Array([-0x510a1274edcebc,-6521.104342668403,11327.447458238365,-.003072403061287145]),sunZ:new Float64Array([-1163215847171.9973,-1.3123060261563904,.5775136769017654,-1.5662488470583e-7])}];this.setDate=((n,t,e)=>{R=new Date(n),k=N(R),Q=(B=(k+hn)/36525)*(K=B*(J=B*B)),V=_(k),W=m(),$=x(),en=M(),rn=p(),un=w(),on=y(),nn=T(),tn=nn*nn,an=q(),cn=Z(),fn=G();var r=S($,un,en,rn,W);V+=r,ln=I($,un,en,rn,W),sn=t||0,Nn=e||0,gn=H()}),this.getMoonPosition=function(n,t,e){null===R&&this.setDate(new Date);var r,o=h(O()+ln+0),u=h(L()+0),a=P(u,o,r=X()),i=U(V,a),c=g(i.x,i.y),f=d(i.x,i.y,i.z),l=z(t),s=D(l,c),N=A(l,c,f,r,n,e),v=F(s,N.top_decl,n),m=C(3474.8,N.top_dist);return{ra:N.top_ra,decl:N.top_decl,elevation:v.elevation,azimuth:v.azimuth,diameter:m,eclipLon:o,eclipLat:u,distance:N.top_dist,jd:Nn}},this.getSunPosition=function(n,t,e){null===R&&this.setDate(new Date);var r=new EarthPosition,o=r.getPosition(B/10),u=o.r,a=B;a-=u/299792.458/315576e4;var i=P(-1*(o=r.getPosition(a/10)).lat,h(o.lon+180+ln),u=o.r),c=U(V,i),f=g(c.x,c.y),l=d(c.x,c.y,c.z),s=z(t),N=D(s,f),v=A(s,f,l,u,n,e),m=C(1392e3,v.top_dist),M=F(N,v.top_decl,n);return{ra:v.top_ra,decl:v.top_decl,elevation:M.elevation,azimuth:M.azimuth,diameter:m,jd:Nn}}}