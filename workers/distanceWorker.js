"use strict";class DistanceWorker{constructor(){function t(t,e,n){console.log("DISTANCE WORKER calculating closest distance.");var s=JSON.parse(t),o=JSON.parse(e),r=0,i=null;if(o.length>0){var c=0,r=a(s,o[0]);i=o[0];for(var l=1;l<o.length;l++)(c=a(s,o[l]))<r&&(r=c,i=o[l])}postMessage({cmd:n,distance:r.toString(),coord:JSON.stringify(i)})}function e(t){return Math.PI*t/180}function a(t,a){var n=e(t.latitude),s=e(a.latitude),o=e(a.latitude-t.latitude),r=e(a.longitude-t.longitude),i=Math.sin(o/2)*Math.sin(o/2)+Math.cos(n)*Math.cos(s)*Math.sin(r/2)*Math.sin(r/2);return 6378137*(2*Math.atan2(Math.sqrt(i),Math.sqrt(1-i)))}self.addEventListener("message",e=>{console.log("DISTANCE WORKER: Message recieved.");var a=e.data;switch(a.cmd){case"umbra_lines":case"central_line":t(a.coord,a.array,a.cmd);break;default:console.log("DISTANCE WORKER: Unkown command sent to worker.")}},!1)}}(()=>{console.log("DiSTANCE WORKER: Initialized.");new DistanceWorker})();