"use strict";class SolarCalc{constructor(){function t(t){return t>360||t<0?t-360*Math.floor(t/360):t}function n(t){return 180*t/Math.PI}function e(t){return Math.PI*t/180}function a(n){return t(280.46646+n*(36000.76983+3032e-7*n))}function r(t){return 23+(26+(21.448-t*(46.815+t*(59e-5-.001813*t)))/60)/60}function o(t){var n=125.04-1934.136*t;return r(t)+.00256*Math.cos(e(n))}function s(t){return.016708634-t*(42037e-9+1.267e-7*t)}function i(t){return 357.52911+t*(35999.05029-1537e-7*t)}function u(t){var r=o(t),u=a(t),M=s(t),h=i(t),c=Math.tan(e(r)/2);c*=c;var l=Math.sin(2*e(u)),T=Math.sin(e(h));return 4*n(c*l-2*M*T+4*M*c*T*Math.cos(2*e(u))-.5*c*c*Math.sin(4*e(u))-1.25*M*M*Math.sin(2*e(h)))}function M(t){return(t-2451545)/36525}function h(t){var n=t.getUTCMonth()+1,e=t.getUTCDate(),a=t.getUTCFullYear(),r=t.getUTCHours(),o=t.getUTCMinutes(),s=t.getUTCSeconds();n<=2&&(a-=1,n+=12);var i=Math.floor(a/100),u=2-i+Math.floor(i/4),M=Math.floor(365.25*(a+4716))+Math.floor(30.6001*(n+1))+e+u-1524.5;return M+=r/24,M+=o/1440,M+=s/86400}function c(t,n,a){var r=h(n),o=t/15;o=o<0?Math.ceil(o):Math.floor(o);var s=n.getUTCHours()+o;s<0&&(s+=24),s>24&&(s-=24);var i=60*s+n.getUTCMinutes()+(u(M(r))+t%15*4);i>1440&&(i-=1440),i<-1440&&(i+=1440);var c=i/4-180;return c<-180&&(c+=360),c>180&&(c-=360),e(c)}function l(t,n){var a=e(t),r=n,o=Math.cos(e(90.833))/(Math.cos(a)*Math.cos(r))-Math.tan(a)*Math.tan(r);return Math.acos(o)}this.getSolarDeclination=(t=>{var n=new Date(t),a=0;return n.setUTCMonth(0),n.setUTCDate(1),n.setUTCHours(0),n.setUTCMinutes(0),n.setUTCSeconds(0),n.setUTCMilliseconds(0),2===(a=(t.getTime()-n.getTime())/864e5)&&(a+=1e-6),Math.asin(Math.sin(e(-23.44))*Math.cos(e(360)/365.24*(a+10)+e(360)/Math.PI*.0167*Math.sin(e(360)/365.24*(a-2))))}),this.getSolarElevation=function(t,a,r){var o=0,s=e(t),i=c(a,r),u=this.getSolarDeclination(r);return o=Math.asin(Math.cos(i)*Math.cos(u)*Math.cos(s)+Math.sin(u)*Math.sin(s)),o=n(o)},this.getJulianDay=(t=>h(t)),this.calcSunriseSetUTC=function(t,e,a,r){var o=new Date(e);o.setUTCHours(0),o.setUTCMinutes(0),o.setUTCSeconds(0),o.setUTCMilliseconds(0),o.setUTCDate(o.getUTCDate()-1);var s=u(M(h(o))),i=l(a,this.getSolarDeclination(e));if(!isNaN(i)){t||(i=-i);var c=720-4*(r+n(i))-s,T=Math.round(60*(c-Math.floor(c)));return c=Math.floor(c),o.setUTCMinutes(o.getUTCMinutes()+c),o.setUTCSeconds(o.getUTCSeconds()+T),o}return null}}}