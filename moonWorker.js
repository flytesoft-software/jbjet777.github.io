"use strict";class MoonWorker{constructor(){function a(i){d=new EclipseData(JSON.parse(i)),g=Math.round(d.getMaxEclipseDateJD())}function b(i){f=JSON.parse(i)}function c(i,j){var k=0,l=new Date(parseFloat(i)),m=0;j&&(m=parseFloat(j)),h.setDate(l,g,m),f.altitude&&(k=f.altitude);var n=h.getMoonPosition(f.latitude,f.longitude,k),o=h.getSunPosition(f.latitude,f.longitude,k);postMessage({cmd:"moon_position",moon_pos:JSON.stringify(n),sun_pos:JSON.stringify(o),date:l.getTime().toString()})}importScripts("EclipseCalc.js"),importScripts("planetpositions.js"),importScripts("earth_vsop_d.js");var d=null,f=null,g=0,h=new PlanetPositionsAC;self.addEventListener("message",function(i){var j=i.data;switch(j.cmd){case"eclipse":a(j.eclipse);break;case"location":b(j.coords);break;case"real":c(j.time,j.jd);break;default:console.log("MOON WORKER: Unkown command sent to worker.");}},!1)}}(function(){console.log("MOON WORKER: Initialized.");new MoonWorker})();